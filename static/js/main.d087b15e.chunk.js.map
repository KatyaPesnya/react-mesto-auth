{"version":3,"sources":["images/header-logo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","images/success.svg","images/not-success.svg","components/InfoTooltip.js","components/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","onSingOut","authorizationEmail","location","useLocation","React","useState","menuIsOpen","setMenuIsOpen","className","type","onClick","handleSingOut","src","logo","alt","pathname","to","Footer","Date","getFullYear","CurrentUserContext","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","link","name","onCardDelete","onCardLike","length","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","aria-label","cards","map","PopupWithForm","isOpen","noValidate","onSubmit","title","children","submitText","onClose","ImagePopup","EditProfilePopup","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","id","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","placeholder","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","all","getUserInfo","getCards","fetch","then","_checkResponse","data","method","body","JSON","stringify","setLike","deleteLike","Authorization","ProtectedRoute","Component","component","Login","onLogin","onCheckToken","email","password","loginData","setLoginData","handleChange","Register","onRegister","registerData","setRegisterData","InfoTooltip","isSuccess","success","notSuccess","BASE_URL","checkResponse","response","Error","statusText","App","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoToolTipOpen","setIsInfoToolTipOpen","selectedCard","setSelectedCard","setCurrentUser","setAuthorizationEmail","setLoggedIn","setIsSuccess","history","useHistory","localStorage","removeItem","push","handleInfoToolTipOpen","closeAllPopups","catch","err","console","log","checkToken","useCallback","jwt","auth","getItem","Provider","path","setItem","changeLikeCardStatus","newCard","state","c","deleteCard","filter","setUserInfo","createCard","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d087b15e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.5f3664ca.svg\";","import React from 'react';\nimport logo from '../images/header-logo.svg';\nimport {NavLink, useLocation} from 'react-router-dom';\n\nfunction Header({loggedIn, onSingOut, authorizationEmail}) {\n\n  const location = useLocation();\n\n  const [menuIsOpen, setMenuIsOpen] = React.useState(false);\n\n  function handleToggleMenu() {\n    setMenuIsOpen(!menuIsOpen)\n  }\n\n  function handleSingOut(){\n    setMenuIsOpen(false)\n    handleSingOut()\n    onSingOut()\n  }\n  return (\n\n      <header className={loggedIn ? 'header header_row-reverse page__content': 'header page__content'}>\n            {/* <img src={logo} alt=\"логотип Mesto Russia\" className=\"header__logo\"/> */}\n        {loggedIn &&\n        (\n          <div className={menuIsOpen ? 'header__container header__container_opened': 'header__container'} >\n             <address className=\"header__address\">{authorizationEmail && authorizationEmail}</address>\n             <button className=\"header__button\" type=\"button\" onClick={handleSingOut}>Выйти</button>\n             </div>\n             )\n}\n<div className=\"header__container-main\">\n<img src={logo} alt=\"логотип Mesto Russia\" className=\"header__logo\"/>\n{loggedIn &&\n(<button className={menuIsOpen ? 'header__menu-button header__menu-button_opened' : 'header__menu-button'} type=\"button\" onClick={handleToggleMenu}/>)\n}\n{!loggedIn &&\n(<nav>\n{location.pathname === '/sing-in' &&(<NavLink className=\"header__navlink\" to=\"/sing-up\"> Регистрация </NavLink>)}\n{location.pathname === '/sing-up' &&(<NavLink className=\"header__navlink\" to=\"sing-in\"> Войти </NavLink>)}\n</nav>)\n}\n</div>\n </header>\n  )\n}\n\nexport default Header;","import React from 'react';\n\nfunction Footer() {\n  return (\n      <footer className=\"footer page__content\">\n        <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n      </footer>\n  )\n}\n\nexport default Footer;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext()\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n      `card__delete-button ${isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'}`\n  );\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = (\n      `card__like ${isLiked ? 'card__like_active' : 'card__like'}`\n  );\n\n  function handleCardClick() {\n    props.onCardClick(props.card)\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n  function handleCardDelete() {\n    props.onCardDelete(props.card)\n  }\n  return (\n\n      <li className=\"card\">\n        <img  className=\"card__image\" onClick={handleCardClick} src={props.card.link}\n             alt={`Фотография ${props.card.name}`}/>\n        <button type=\"button\" onClick={handleCardDelete} className={cardDeleteButtonClassName}/>\n        <div className=\"card__item\">\n          <h2 className=\"card__title text-content\">{props.card.name} </h2>\n          <div className=\"card__like-container\">\n            <button type=\"button\" onClick={handleLikeClick} className={cardLikeButtonClassName}/>\n            <span className=\"card__like-count\">{props.card.likes.length}</span>\n          </div>\n        </div>\n      </li>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n      <main className=\"content\">\n        <section className=\"profile page__content\">\n          <div className=\"profile__overlay\">\n            <img src={currentUser.avatar} alt={`Аватар пользователя ${currentUser.name}`} className=\"profile__avatar\"/>\n            <button onClick={props.onEditAvatar} className=\"profile__avatar-edit-button\"/>\n          </div>\n          <div className=\"profile__info\">\n            <h1 className=\"profile__title text-content\">{currentUser.name}</h1>\n            <p className=\"profile__description text-content\">{currentUser.about}</p>\n            <button onClick={props.onEditProfile} type=\"button\" className=\"profile__popup-button\"/>\n          </div>\n          <button onClick={props.onAddPlace} type=\"button\" className=\"profile__add-button\"/>\n        </section>\n        <section className=\"cards\" aria-label=\"#\">\n          <ul className=\"cards__list\">\n            {props.cards.map(card =>\n                <Card\n                    key={card._id}\n                    card={card}\n                    onCardClick={props.onCardClick}\n                    onCardLike={props.onCardLike}\n                    onCardDelete={props.onCardDelete}\n                />\n            )}\n          </ul>\n        </section>\n      </main>\n  )\n}\n\nexport default Main;\n\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n      <section className={`overlay ${props.isOpen && 'overlay_opened'}`}>\n        <div className={`popup popup_type_${props.name}`}>\n          <form noValidate className=\"popup__container\" name={props.name} onSubmit={props.onSubmit}>\n            <h2 className=\"popup__heading\">{props.title}</h2>\n            {props.children}\n            <button type=\"submit\" className=\"popup__button\">{props.submitText}</button>\n          </form>\n          <button onClick={props.onClose} type=\"button\" className=\" overlay__close popup__close\"/>\n        </div>\n      </section>\n  )\n}\n\nexport default PopupWithForm;\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n      <section className={`overlay overlay_type_preview ${props.card && 'overlay_opened'}`} aria-label=\"#\">\n        <div className=\"overlay__container overlay__container_type_image\">\n          <img src={ props.card && props.card.link} alt={`Фотография ${props.card && props.card.name} `} className=\"overlay__image\"/>\n          <h2 className=\"overlay__caption\">{props.card && props.card.name}</h2>\n          <button onClick={props.onClose} type=\"button\" className=\"overlay__close  overlay__close_type_image\"/>\n        </div>\n      </section>\n  )\n}\n\nexport default ImagePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup(props){\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser,props.isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n  return(\n      <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      submitText=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n  >\n    <input className=\"popup__input\" id=\"name-input\" type=\"text\" name=\"name\" minLength='2' maxLength='40'\n           required value={name || ''} onChange={handleChangeName}/>\n    <span className=\"popup__input-error name-input-error\"/>\n    <input className=\"popup__input\" id=\"job-input\" type=\"text\" name=\"about\" minLength='2'\n           maxLength='200' required value={description || ''} onChange={handleChangeDescription}/>\n    <span className=\"popup__input-error job-input-error\"/>\n\n  </PopupWithForm>)\n}\nexport default EditProfilePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\n\nfunction EditAvatarPopup(props) {\n\n  const avatarRef= React.useRef('')\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n    avatarRef.current.value=''\n  }\n  return (\n\n      <PopupWithForm\n          name=\"avatar\"\n          title=\"Обновить аватар\"\n          submitText=\"Сохранить\"\n          isOpen={props.isOpen}\n          onClose={props.onClose}\n          onSubmit={handleSubmit}\n      >\n        <input id=\"avatar-input\" type=\"url\" name=\"avatar\" required className=\"popup__input\" ref={avatarRef}/>\n        <span className=\"popup__input-error avatar-input-error\"/>\n\n      </PopupWithForm>\n\n  )\n}\nexport default EditAvatarPopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props){\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onAddPlace({\n      name: name ,\n      link: link ,\n    })\n\n  }\n  return(\n      <PopupWithForm\n          name=\"add\"\n          title=\"Новое место\"\n          submitText=\"Создать\"\n          isOpen={props.isOpen}\n          onClose={props.onClose}\n          onSubmit={handleSubmit}\n      >\n        <input id=\"title-input\" type=\"text\" name=\"caption\" required minLength='2' maxLength='30'\n               placeholder=\"Название\" className=\"popup__input\" value={name|| ''} onChange={handleChangeName}/>\n        <span className=\"popup__input-error title-input-error\"/>\n        <input id=\"url-input\" type=\"url\" name=\"url\" required placeholder=\"Ссылка на картинку\"\n               className=\"popup__input\" value={link|| ''} onChange={handleChangeLink}/>\n        <span className=\"popup__input-error url-input-error\"/>\n\n      </PopupWithForm>\n  )\n}\nexport default AddPlacePopup;","\n class Api {\n    constructor(options) {\n        this._url = options.url;\n        this._headers = options.headers;\n    }\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка ${res.status}`);\n    }\n    getData() {\n        return Promise.all([this.getUserInfo(), this.getCards()]);\n    }\n    getCards() {\n        return fetch(`${this._url}/cards`, {\n             headers: this._headers })\n            .then(this._checkResponse)\n    }\n    createCard(data) {\n        return fetch(`${this._url}/cards`, {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                link: data.link\n            })\n        })\n            .then(this._checkResponse)\n    }\n    deleteCard(id) {\n        return fetch(`${this._url}/cards/${id}`, {\n            method: 'DELETE',\n            headers: this._headers,\n        })\n            .then(this._checkResponse)\n    }\n\n    getUserInfo() {\n        return fetch(`${this._url}/users/me`, {\n            headers: this._headers,\n        })\n            .then(this._checkResponse)\n    }\n   changeLikeCardStatus(id, isLiked) {\n     if (isLiked) {\n       return this.setLike(id);\n     } else {\n       return this.deleteLike(id);\n     }\n   }\n\n    setUserInfo(data) {\n        return fetch(`${this._url}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n            })\n        })\n            .then(this._checkResponse)\n    }\n    setUserAvatar(data) {\n        return fetch(`${this._url}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                avatar: data.avatar\n              })\n            })\n            .then(this._checkResponse)\n    }\n\n    setLike(id) {\n        return fetch(`${this._url}/cards/likes/${id}`, {\n            method: 'PUT',\n            headers: this._headers,\n        })\n            .then(this._checkResponse)\n    }\n    deleteLike(id) {\n        return fetch(`${this._url}/cards/likes/${id}`, {\n            method: 'DELETE',\n            headers: this._headers,\n        })\n            .then(this._checkResponse)\n    }\n}\n\n const api = new Api({\n     url: 'https://mesto.nomoreparties.co/v1/cohort-21',\n     headers: {\n     Authorization: '8bc2b522-b2e5-4475-a3df-8cf1760d3928',\n        'Content-Type': 'application/json'\n    }\n  }\n)\n export default  api;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {()=>\n    props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />}\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;","import React, {useState} from 'react';\n\n\nfunction Login({onLogin, onCheckToken})  {\n  const [loginData, setLoginData] = useState({\n    email: '', password: ''\n  })\n   function handleChange(e) {\n     const {name, value} = e.target;\n     setLoginData({...loginData, [name]: value,})\n     \n   }\n         function handleSubmit(e){\n             e.preventDefault()\n             if(!loginData.email || !loginData.password){\nreturn\n             }\n            \n             onLogin(loginData)\n             }\n         \n    \n      return (\n        <div className ='login'>\n          <h3 className='login__info'>Вход</h3>\n          <form onSubmit={handleSubmit} className ='login__form'>\n          <input required  name=\"email\" type=\"email\" className='login__input'placeholder='Email' onChange={handleChange} value={loginData.email}/>\n          <input required  name=\"password\" type=\"password\"  className='login__input'placeholder='Пароль' onChange={handleChange} value={loginData.password}/>\n            <button type=\"submit\" className=\"login__button\"> Войти </button>\n        </form>\n      </div>\n      )\n}\n\nexport default Login;","import React, { useState } from 'react';\nimport { Link} from 'react-router-dom';\n\n\nfunction Register ({onRegister}){\nconst [registerData, setRegisterData] = useState({\n  email: '', password: ''\n})\n function handleChange(e) {\n   const {name, value} = e.target;\n   setRegisterData({...registerData, [name]: value,})\n   \n }\n       function handleSubmit(e){\n           e.preventDefault()\n            onRegister(registerData)\n           \n       } \n     \n      \n      return (\n        <div className ='register'>\n          <h3 className='register__info'>Регистрация</h3>\n          <form onSubmit={handleSubmit} className ='register__form'>\n          <input required  name=\"email\" type=\"email\" className='register__input'placeholder='Email' \n          onChange={handleChange} value={registerData.email}\n          />\n          <input required  name=\"password\" type=\"password\"  className='register__input'placeholder='Пароль'\n          onChange={handleChange} value={registerData.password}\n          />\n            <button type=\"submit\" className=\"register__button\"> Зарегистрироваться </button>\n        </form>\n        <p className=\"register__paragraph\">Уже зарегистриваны? <Link className='register__link' to=\"/sing-in\"> Войти </Link></p>\n      </div>\n      )\n}\n\nexport default Register;\n\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/not-success.df8eddf6.svg\";","import React from 'react';\nimport success from '../images/success.svg'\nimport notSuccess from '../images/not-success.svg'\n\nfunction InfoTooltip(props) {\n    return (\n            <section className={`overlay ${props.isOpen && 'overlay_opened'}`}>\n              <div className={`popup popup_type_${props.name}`}>\n                <div className=\"popup__container\" name={props.name} >\n                <img className=\"popup__icon\" src={props.isSuccess ? success : notSuccess} \n                alt={ props.isSuccess ? 'успешная регистрация' : 'неуспешная регистрация'} />\n                  <h3 className=\"popup__title\">{props.isSuccess ? 'Вы успешно зарегистрировались' : 'Что-то пошло не так! Попробуйте еще раз.'}</h3>\n                </div>\n                <button onClick={props.onClose} type=\"button\" className=\" overlay__close popup__close\"/>\n              </div>\n            </section>\n        )\n      }\n      \n      export default InfoTooltip;","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst checkResponse =(response) => {\nreturn response.ok ? response.json() : Promise.reject( new Error(`Ошибка ${response.status}: ${response.statusText}`))\n}\n\nexport const register = (data) => {\n    return fetch(`${BASE_URL}/auth/local/signup` , {\n     method: 'POST'  ,\n     headers: {\n         'Accept': 'application/json',\n         'Content-Type': 'application/json'\n     } ,\n     body: JSON.stringify({ password: data.password, email: data.email})\n    })\n    .then(response => checkResponse(response))\n        \n}\n\nexport const autorize = (data) => {\n    return fetch(`${BASE_URL}/auth/local/signin` , {\n     method: 'POST'  ,\n     headers: {\n         'Accept': 'application/json',\n         'Content-Type': 'application/json'\n     } ,\n     body: JSON.stringify({ password: data.password, email: data.email})\n    })\n    .then(response => checkResponse(response))\n        \n}\n\nexport const checkToken=(jwt)=>{\n    return fetch(`${BASE_URL}/auth/local/users/me`, \n    {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${jwt}`,\n        },\n     } )\n       .then(response => checkResponse(response))\n           \n   }\n\n","import React, {useState} from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoToolTip from './InfoTooltip';\nimport * as auth from './auth'\n\n\nfunction App() {\n  const [cards, setCards] = useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n\n  const [authorizationEmail,setAuthorizationEmail]= useState(null)\n  const [loggedIn, setLoggedIn] = useState(false);\n const [isSuccess, setIsSuccess] = useState(false);\n const history = useHistory();\n\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    })\n        .catch((err) => {\n          console.log(err);\n        })\n  }\n function handleSingOut(){\n   setLoggedIn(false)\n   localStorage.removeItem('jwt')\n   history.push('/sing-in')\n }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n        .then(()=> {\n          setCards((state)=> state.filter((c) => c !== card))\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }\n  function handleAddPlaceSubmit(data){\n    api.createCard(data)\n        .then((newCard)=> {\n          setCards([newCard, ...cards])\n          closeAllPopups()\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }\n  React.useEffect(() => {\n    api.getCards()\n        .then((data) => {\n          setCards(data)\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }, [])\n\n  React.useEffect(() => {\n    api.getUserInfo()\n        .then((data) => {\n          setCurrentUser(data)\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }, [])\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleInfoToolTipOpen() {\n    setIsInfoToolTipOpen(!isInfoToolTipOpen)\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setIsInfoToolTipOpen(false)\n    setSelectedCard(null)\n\n  }\n  function handleUpdateUser(data){\n    api.setUserInfo(data)\n        .then((data)=> {\n          setCurrentUser(data);\n          closeAllPopups();\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n\n}\n  function handleUpdateAvatar(data) {\n    api.setUserAvatar(data)\n        .then((data) => {\n              setCurrentUser(data);\n              closeAllPopups();\n            })\n        .catch((err) => {\n          console.log(err);\n        })\n\n  }\n  function handleInfoToolTipOpen() {\n    setIsInfoToolTipOpen(!isInfoToolTipOpen)\n  }\n\n  function register(data){\n    auth\n    .register(data)\n    .then((data)=>{\n      setIsSuccess(true);\n      handleInfoToolTipOpen();\n      history.push('/sing-in')\n    },\n    (err) => {\n      console.log(err)\n      setIsSuccess(false)\n      handleInfoToolTipOpen()\n    })\n  }\n\n  function login(data){\n     auth\n    .autorize(data)\n    .then((data)=> {\n      setLoggedIn(true);\n      localStorage.setItem('jwt' , data.jwt);\n      history.push('/')\n      checkToken()\n    },\n    (err) => {\n      console.log(err)\n    }\n    )\n  }\n  const checkToken = React.useCallback(\n    () => {\n\n      const jwt = localStorage.getItem('jwt');\n\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          setLoggedIn(true)\n          setAuthorizationEmail(data.data.email)\n          history.push('/')\n        },\n          (err) => {\n            console.log(err)\n          })\n    },\n    [history],\n  )\n  React.useEffect(()=>{\n    const jwt =localStorage.getItem('jwt')\n    if(jwt){\n      checkToken()\n    }\n  },[checkToken])\n\n  return (\n      <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"root\">\n          <div className=\"page\">\n            <Header\n            loggedIn={loggedIn}\n            handleSingOut={handleSingOut}\n            onSingOut={handleSingOut}\n            authorizationEmail={authorizationEmail}\n            />\n            <Switch>\n              <Route path=\"/sign-up\">\n                <Register onRegister={register}/>\n                </Route>\n                <Route path=\"/sign-in\">\n                   <Login \n                   onLogin={login}\n                   onCheckToken={checkToken}/> \n                </Route>\n             \n                <ProtectedRoute\n                  path=\"/\"\n                  // title=\"ВЫ уверены?\"\n                  // ButtonText=\"Да\"\n                  component={Main}\n                  loggedIn={loggedIn}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                  />\n                  <Route>\n                    {loggedIn ? <Redirect to='/sing-in'/>: <Redirect to='/'/> }\n                  </Route>\n               </Switch>\n            <Footer/>\n          </div>\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n          <PopupWithForm   name=\"delete-card\" title=\"Вы уверены?\" submitText=\"Да\"/>\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n          <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n        </div>\n      </div>\n      <InfoToolTip isOpen={isInfoToolTipOpen} onClose={closeAllPopups} isSuccess ={isSuccess} />\n</CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}